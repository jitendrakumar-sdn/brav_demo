<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brav</title>
    <!-- style file link -->
    <link rel="stylesheet" href="../styles/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="../styles/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="../styles/style.css" type="text/css"><!-- Include Editor style. -->
    <link href='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.7.3/css/froala_editor.min.css' rel='stylesheet' type='text/css'
    />
    <link href='https://cdnjs.cloudflare.com/ajax/libs/froala-editor/2.7.3/css/froala_style.min.css' rel='stylesheet' type='text/css'
    />
</head>

<body style="background: #FFF">
    <% include ../header %>
    <div class="right-side-panel">
        <div class="container container-top-margin">
            <div class="row">
            <div class="col-md-12">
            <h1>Notes</h1>
            <textarea id="froala-editor"></textarea>
            <div style="width:140px">
                <button id="newnotes" class="btn btn-default login-btn">Save</button>
            </div>
        </div>
        </div>
        </div>
    </div>
</body>

</html>

<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/sweet-alert.min.js"></script>
<script src="../js/app.js"></script>

<!-- Include JS file. -->
<!-- <script src="../js/fullscreen.min.js"></script> -->
<script src="../js/froala_editor.min.js"></script>
<script src="../js/froala_editor.pkgd.min.js"></script>
<script>
    $(document).ready(function () {
        var meUser;
        if(sessionStorage.getItem('bravUser')){
            meUser= JSON.parse(sessionStorage.getItem('bravUser'))
        }else{
            window.location = '/';
        }

      $('#froala-editor').froalaEditor({
            toolbarButtons: ['bold', 'italic', 'strikeThrough', 'underline', '|', 'paragraphFormat', 'paragraphStyle', 'align', 'formatOL', 'formatUL', 'indent', 'outdent']
        })
        
        $('#newnotes').on('click',function(e){
            e.preventDefault();
            var _val = $('#froala-editor').val();
            if(_val){
                var data = {
                    note: String(_val),
                    userid: meUser.id
                }
                $.ajax({
                    method: "POST",
                    url: '/note/createnew',
                    data: data,
                    success: function(res){
                        console.log('notes res',res)
                        if(res.success){
                            swal({title:res.msg, icon: "success"});
                            $('#froala-editor').val('');
                        }else {
                            swal({ title: res.msg, icon: "info" });
                        }
                    },
                    error: function(err){

                    },
                    dataType: 'JSON'

                })
            }
            console.log('editor.html.get()', $('#froala-editor').val())
        })

    });

</script>